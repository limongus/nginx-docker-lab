# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ4: Composer, –∫–ª–∞—Å—Å—ã –∏ —Ä–∞–±–æ—Ç–∞ —Å –ø—É–±–ª–∏—á–Ω—ã–º API

![Composer](https://img.shields.io/badge/Composer-885610?style=for-the-badge&logo=composer&logoColor=white)
![Guzzle](https://img.shields.io/badge/Guzzle-PHP-orange?style=for-the-badge)
![PHP](https://img.shields.io/badge/php-%23777BB4.svg?style=for-the-badge&logo=php&logoColor=white)

## üë©‚Äçüíª –ê–≤—Ç–æ—Ä
–§–µ–¥–æ—Ä–æ–≤–∞ –ù–∞—Ç–∞–ª—å—è, –≥—Ä—É–ø–ø–∞ 3–ú–û-2

---

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
–¶–µ–ª—å—é —Ä–∞–±–æ—Ç—ã –±—ã–ª–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞: –æ—Å–≤–æ–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π **Composer** –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫, —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–¥–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **PHP-–∫–ª–∞—Å—Å–æ–≤** –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è **–ø—É–±–ª–∏—á–Ω–æ–≥–æ API** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞.
  
–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞: [http://localhost:8080](http://localhost:8080)

---

## ‚öôÔ∏è –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç

1.  –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
    ```bash
    git clone https://github.com/limongus/nginx-docker-lab.git
    cd nginx-docker-lab 
    ```
2.  **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å PHP-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
    ```bash
    docker-compose run --rm php composer install
    ```
3.  –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
    ```bash
    docker-compose up -d --build
    ```
4.  –û—Ç–∫—Ä—ã—Ç—å —Å–∞–π—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

---

## üìÇ –ù–æ–≤–æ–µ –≤ –ø—Ä–æ–µ–∫—Ç–µ

*   `composer.json` / `composer.lock` ‚Äî –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Composer, –æ–ø–∏—Å—ã–≤–∞—é—â–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞.
*   `vendor/` ‚Äî –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞–º–∏ (–≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, `guzzlehttp/guzzle`).
*   `ApiClient.php` ‚Äî **–ù–æ–≤—ã–π –∫–ª–∞—Å—Å**, –æ—Ç–≤–µ—á–∞—é—â–∏–π –∑–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –≤–Ω–µ—à–Ω–∏–º API.
*   `UserInfo.php` ‚Äî **–ù–æ–≤—ã–π –∫–ª–∞—Å—Å**, –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—â–∏–π –ª–æ–≥–∏–∫—É —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (IP, User-Agent).
*   *–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `process.php`*: –¢–µ–ø–µ—Ä—å —Å–∫—Ä–∏–ø—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `ApiClient` –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç `cookie`.
*   *–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `index.php`*: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ç–µ–ø–µ—Ä—å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ API –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ `UserInfo` –∏ `cookie`.

---

## üì∏ –°–∫—Ä–∏–Ω—à–æ—Ç—ã —Ä–∞–±–æ—Ç—ã

### 1. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç), –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ `ApiClient` –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞.

![–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è API](screenshots/14.png)
*–î–∞–Ω–Ω—ã–µ, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –∏–∑ API*

### 2. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ Cookie
–ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ç–µ–ø–µ—Ä—å —Ç–∞–∫–∂–µ –≤—ã–≤–æ–¥–∏—Ç—Å—è –±–ª–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Å–µ–∞–Ω—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (IP, User-Agent) –∏ –≤—Ä–µ–º–µ–Ω–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–æ–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ cookie.

![–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ Cookie](screenshots/15.png)
*–ö–ª–∞—Å—Å UserInfo –∏ cookie*

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–í —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ PHP-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç **Composer** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏. –õ–æ–≥–∏–∫–∞ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–∞ –≤ **–∫–ª–∞—Å—Å—ã** (`ApiClient`, `UserInfo`), —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Å—Ç—ã–º –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–º. –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å **–≤–Ω–µ—à–Ω–∏–º –ø—É–±–ª–∏—á–Ω—ã–º API**, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Ä–∞–±–æ—Ç–∞ —Å **cookie** –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.